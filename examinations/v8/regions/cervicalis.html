<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Шейный отдел позвоночника</title>
  <link rel="stylesheet" type="text/css" href="../view.css" media="all">
  <script type="text/javascript" src="../view.js"></script>
  <link rel="stylesheet" type="text/css" href="../msfmultiselect.css" />
  <script src="../msfmultiselect.js"></script>
  <!-- <script type="text/javascript" src="autorep.js"></script> -->
  <script type="text/javascript" src="jquery-2.1.3.min.js"></script>

  <script>
    function testVariable() {
      debugger

      let result_list = [];
      if (document.getElementById("list").length > 0) {
        for (let i = 0; i < document.getElementById("list").length; i++) {
          let option = document.getElementById("list").options[i];
          if (option.selected) {
            result_list = option.value;
          }
        }
      }

      let add = "";
      let proekcia = "На обзорных рентгенограммах шейного отдела позвоночника в двух проекциях ";
      let os = "ось не отклонена.";
      let lord = "Физиологический шейный лордоз сохранён.";
      let vys = "Высота тел позвонков не снижена.";
      let min = "Минеральная плотность позвонков сохранена.";
      let disc = "Высота межпозвонковых дисков не снижена, ";
      let kraevye = "спондилофиты не визуализируются";
      let ost = "";
      let dug = "Дугоотростчатые суставы не изменены.";
      let pol = "Полулунные отростки без особенностей.";
      let conclusion = "Заключение: рентген-признаки ";
      let conclusionNar = "";
      let conclusionSkol = "";
      let conclusionOsteo = "";
      let side = "вправо";
      let abz = String.fromCharCode(13, 10);


      const addList = {
        арт: "Артефакты от одежды.",
        с7: "С7 скрыт за тенью мягких тканей.",
      };



      for (let key in addList) {
        if (pole.value.includes(key)) {
          add += addList[key] + ' ';
        }
      }


      if (pole.value.includes('лев')) {
        side = "влево";
      }

      if (pole.value.includes('леготк')) {
        os = `ось легко отклонена ${side}.`;
      } else if (pole.value.includes('умотк')) {
        os = `ось умеренно отклонена ${side}.`;
      } else if (pole.value.includes('отк')) {
        os = `ось отклонена ${side}.`;
      } else if (pole.value.includes('скол')) {
        os = `ось шейно-грудного отдела позвоночника С-образно сколиотически искривлена ${side} без ротации тел позвонков. Угол вершиной на уровне Th2 5,5гр. На высоте искривления определяется минимальное снижение высоты противоположных отделов межпозвонковых дисков.`;
        conclusionSkol = "С-образной сколиотической деформации шейно-грудного отдела позвоночника I степени (по Дж. Коббу), "
        }
      
      if (pole.value.includes('вып')) {
        lord = "Физиологический шейный лордоз выпрямлен.";
        conclusionNar = "нарушения статики, ";
      } else if (pole.value.includes('киф')) {
        lord = "Физиологический шейный лордоз выпрямлен с кифотической установкой.";
        conclusionNar = " нарушения статики, ";
      } else if (pole.value.includes('сгл')) {
        lord = "Физиологический шейный лордоз сглажен.";
        conclusionNar = "нарушения статики, ";
      } else if (pole.value.includes('усил')) {
        lord = "Физиологический шейный лордоз усилен.";
        conclusionNar = "нарушения статики, ";
      }

      if (pole.value.includes('умин')) {
        min = "Минеральная плотность позвонков умеренно снижена";
      } else if (pole.value.includes('мин')) {
        min = "Минеральная плотность позвонков снижена";
      }

      if (pole.value.includes('3-5')) {
        disc = "Высота межпозвонковых дисков снижена в сегменте(-ах): С3-С4, С4-С5, ";
      } else if (pole.value.includes('2-7')) {
        disc = "Высота межпозвонковых дисков снижена в сегменте(-ах): С2-С3, С3-С4, С4-С5, С5-С6, С6-С7, ";
      }

      if (pole.value.includes('суб')) {
        disc += "субхондральный склероз тел позвонков, ";
        conclusionOsteo += "остеохондроз, ";
        conclusion += "дегенеративно-дистрофических изменений шейного отдела позвоночника";
      } else if (pole.value.includes('упл')) {
        disc += "уплотнены замыкательные пластинки тел позвонков, ";
        conclusionOsteo += "остеохондроз, ";
        conclusion += "умеренных дегенеративно-дистрофических изменений шейного отдела позвоночника";
      } else if (pole.value.includes('подч')) {
        disc += "подчёркнуты замыкательные пластинки тел позвонков, ";
        conclusionOsteo += "остеохондроз, ";
        conclusion += "начальных дегенеративно-дистрофических изменений шейного отдела позвоночника";
      } 

      if (pole.value.includes('нач')) {
        conclusion += "начальных дегенеративно-дистрофических изменений шейного отдела позвоночника";
      } else if (pole.value.includes('умдег')) {
        conclusion += " умеренных дегенеративно-дистрофических изменений шейного отдела позвоночника";
      } else if (pole.value.includes('дег')) {
        conclusion += "дегенеративно-дистрофических изменений шейного отдела позвоночника";
      } else if (pole.value.includes('выр')) {
        conclusion += " выраженных дегенеративно-дистрофических изменений шейного отдела позвоночника";
      }

      if (pole.value.includes('нар')) {
        conclusionNar = "нарушения статики, ";
      }

      if (pole.value.includes('спонд')) {
        disc += "спондилофиты по задним и по передним поверхностям тел позвонков, ";
      } else if (pole.value.includes('скоб')) {
        disc += "спондилофиты по задним и скобкообразного характера по переднебоковым поверхностям тел позвонков, ";
        conclusionOsteo += "спондилёз, "
      }

      if (pole.value.includes('ост')) {
        disc += "изменения в остальных отделах менее выражены,";
      }

      if (pole.value.includes('дугуп')) {
        dug = "Уплотнены суставные поверхности дугоотростчатых суставов.";
        conclusionOsteo += "спондилоартроз, ";
      } else if (pole.value.includes('дугпо')) {
        dug = "Подчеркнуты суставные поверхности дугоотростчатых суставов.";
        conclusionOsteo += "спондилоартроз, ";
      } else if (pole.value.includes('дуг')) {
        dug = "Уплотнены суставные поверхности и неравномерно сужена рентгеновская суставная щель дугоотростчатых суставов.";
        conclusionOsteo += "спондилоартроз, ";
      }

      if (pole.value.includes('пол')) {
        pol = "Полулунные отростки заострены, удлинены, некоторые латерально отклонены.";
      }

      disc = disc.replace(/,(?![^,]*,)/m, '.');

      if (conclusionOsteo != '') {
        conclusionOsteo = " (" + conclusionOsteo.replace(/,(?![^,]*,)/m, '),');
      }

      if (conclusionOsteo + conclusionSkol == "" && conclusionNar !='') {
        conclusionNar = 'нарушения статики шейного отдела позвоночника, '
      }

      conclusion += conclusionOsteo + conclusionNar + conclusionSkol; 

      if (conclusion == "Заключение: рентген-признаки ") {
        conclusion = "Заключение: рентген-признаков патологических изменений не выявлено,"
      }

      conclusion = conclusion.replace(/,(?![^,]*,)/m, '.');

      // document.getElementById("show").innerText = result_list;      
      // pro_okno = document.getElementById("pro").innerHTML;





      
//       Высота тела С3 снижена по передней поверхности 
//       Высота тела С4 снижена по передней поверхности
//       Высота тела С5 снижена по передней поверхности
//       Высота тела С6 снижена по передней поверхности
//       Высота тела С7 снижена по передней поверхности
// до 1/4 высоты
// до 1/5 высоты
// до 1/3 высоты
// клиновидной деформации C3 I степени
// клиновидной деформации C3 II степени



// С функциональными пробами
// в нейтральном
// с функциональной пробой на сгибание
// с функциональной пробой на разгибание
// нестабильности в сегменте(-ах): С2-С3, С3-С4, С4-С5, С5-С6, С6-С7 



// Уплотнение в переднем отделе межпозвонкового диска С6-С7

// Смещения тел позвонков С2, С3, С4, С5, С6 кпереди
// Смещения тел позвонков С2, С3, С4, С5, С6 кзади
// антеспондилолистез, ретроспондилолистез











      document.getElementById("show").value = 
      add
      + proekcia
      + os
      + abz
      + lord
      + abz
      + vys
      + abz
      + min
      + abz
      + disc
      + abz
      + dug
      + abz
      + pol
      + abz
      + conclusion;



      let input = document.getElementById("pole");
      input.addEventListener("keypress", function (event) {
        if (event.key === "Enter") {
          event.preventDefault();
          document.getElementById("saveForm").click();
        }
      });
    }

    function copy_to_clipboard(show) {
      document.getElementById(show).select();
      document.execCommand('copy');
    }

  </script>





</head>

<body id="main_body">

  <div id="form_container">

    <div id="form_item_1">


      <form id="form_48871" class="appnitro" method="post" action="">
        <div class="form_description">
          <h2>Шейный отдел позвоночника</h2>
          <p><!-- description --></p>
        </div>

        <div class="my_container">


          <div class="my_card">
            <select class="form-control" id="list" name="list" multiple>
              <!-- <option disabled>------------------ОСЬ</option>
              <option value="os_um_otklonena">умеренно отклонена</option>
              <option value="os_otklonena">отклонена</option>
              <option value="os_skol">сколиотически</option> -->
            </select>

            <ul class="my_ul">
              <li>..</li>
            </ul>


          </div>
        </div>


      </form>


    </div>





    <div id="form_item_2">


      <div class="page">
        <nav class="page__menu menu">
          <ul class="menu__list r-list">
            <li class="menu__group"><a href="thorax.html" class="menu__link r-link text-underlined">ОГК</a></li>
            <li class="menu__group"><a href="knee.html" class="menu__link r-link text-underlined">КОЛ</a></li>
            <li class="menu__group"><a href="ankle.html" class="menu__link r-link text-underlined">ГОЛ</a></li>
            <li class="menu__group"><a href="hip.html" class="menu__link r-link text-underlined">ТБС</a></li>
            <li class="menu__group"><a href="wrist.html" class="menu__link r-link text-underlined">ЛУЧ</a></li>
          </ul>
          <ul class="menu__list r-list">
            <li class="menu__group"><a href="shoulder.html" class="menu__link r-link text-underlined">ПЛЕЧ</a></li>
            <li class="menu__group"><a href="cervicalis.html" class="menu__link r-link text-underlined">ШОП</a></li>
            <li class="menu__group"><a href="#0" class="menu__link r-link text-underlined">ГОП</a></li>
            <li class="menu__group"><a href="lumbalis.html" class="menu__link r-link text-underlined">ПОП</a></li>
          </ul>
        </nav>
      </div>
      <br>



      <textarea variable="yname" id="show" class="mytextarea" rows="15" cols="60"></textarea><br>




      <input class="pole" id="pole" />

      <li class="buttons">
        <input id="saveForm" class="my_btn-new" type="submit" name="submit" value="Вывод" onclick="testVariable()" />
        <input type="button" class="my_btn-new" value="Скопировать" onclick="copy_to_clipboard('show');">
      </li>

    </div>



  </div>



</body>

<script>

  var list = new MSFmultiSelect(
    document.querySelector('#list'),
    {
      theme: 'theme2',
      selectAll: true,
      searchBox: true,
      width: '500px',
      height: '80px',
      // readOnly: true,
      onChange: function (checked, value, instance) {
        console.log(checked, value, instance);
      },
      // appendTo: '#myselect',
      autoHide: true
    }
  )



</script>



</html>